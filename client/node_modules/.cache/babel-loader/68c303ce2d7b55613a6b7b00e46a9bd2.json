{"ast":null,"code":"import _objectSpread from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/uusi2/sipuliton4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/uusi2/sipuliton4/sipuliton/client/src/modules/app/components/NavigationBar.js\";\n\n/* In this file, is implementation of the navigation bar and implementation of\nmainmenu which opens from navigation bar.*/\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Navbar, NavbarToggler, Nav, NavItem, NavLink } from 'reactstrap';\nimport { Auth } from 'aws-amplify';\n/* Styles and icons */\n\nimport styles from '../../../styles/navigationbar.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Transition } from 'react-transition-group';\n/* Mainmenu components*/\n\nimport MainMenu_ListItem from '../../mainmenu/components/MainMenu_ListItem';\nimport MainMenu_LogoutButton from '../../mainmenu/components/MainMenu_LogoutButton';\n\nvar NavigationBar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NavigationBar, _React$Component);\n\n  /* Constructor of the navication bar class. */\n  function NavigationBar(props) {\n    var _this;\n\n    _classCallCheck(this, NavigationBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NavigationBar).call(this, props));\n    _this.state = {\n      visible: false,\n      userLogged: false,\n      admin: false,\n      restaurantOwner: false,\n      moderator: false\n    };\n    _this.mainMenu = _this.mainMenu.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.home = _this.home.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  /* Function which will be called when menu button is clicked. */\n\n\n  _createClass(NavigationBar, [{\n    key: \"mainMenu\",\n    value: function mainMenu() {\n      /* Sets menu visibility to visible or not visible. */\n      this.setState({\n        visible: !this.state.visible\n      });\n\n      if (this.state.visible) {\n        this.checkAccessRights();\n      }\n    }\n    /* Function which will be called when home button is clicked. */\n\n  }, {\n    key: \"home\",\n    value: function home() {\n      /* Closes menu, if menu is open */\n      if (this.state.visible === true) {\n        this.mainMenu();\n      }\n    }\n    /* This function checks logged in users rights. */\n\n  }, {\n    key: \"checkAccessRights\",\n    value: function checkAccessRights() {\n      var _this2 = this;\n\n      /* Get user information. */\n      Auth.currentAuthenticatedUser().then(function (user) {\n        /* Get current user group. */\n        var userGroup = user.signInUserSession.accessToken.payload[\"cognito:groups\"][0];\n\n        if (user != null) {\n          /* Check if user is logged in, after that set access to either register or login */\n          _this2.setState({\n            userLogged: true\n          });\n          /* Check if user is basic user, then restrict all accesses */\n\n\n          if (userGroup === \"SipulitonModUserGroup\") {\n            _this2.setState({\n              admin: false,\n              restaurantOwner: false,\n              moderator: false\n            });\n          }\n          /* Check if user has admin access, after that set access to admin pages */\n\n\n          if (userGroup === \"SipulitonAdminUserGroup\") {\n            _this2.setState({\n              admin: true\n            });\n          } else {\n            _this2.setState({\n              admin: false\n            });\n          }\n          /* Check if user is restaurant owner, after that set access to restaurant pages */\n\n\n          if (userGroup === 'SipulitonROUserGroup') {\n            _this2.setState({\n              restaurantOwner: true\n            });\n          } else {\n            _this2.setState({\n              restaurantOwner: false\n            });\n          }\n          /* Check if user has moderator access, after that set access to moderator pages */\n\n\n          if (userGroup === \"SipulitonModUserGroup\") {\n            _this2.setState({\n              moderator: true\n            });\n          } else {\n            _this2.setState({\n              moderator: false\n            });\n          }\n        } else {\n          _this2.setState({\n            userLogged: false\n          });\n        }\n      }).catch(function (err) {\n        /* If user is not logged in restrict accesses. */\n        _this2.setState({\n          userLogged: false,\n          admin: false,\n          restaurantOwner: false,\n          moderator: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      /* Navigation bar inline styles. */\n      var navBarStyle = {\n        'backgroundColor': '#99ff99',\n        'color': 'white',\n        'display': 'inlineblock',\n        'width': '100%',\n        'alignItems': 'left',\n        'position': 'fixed',\n        'bottom': '0'\n      };\n      var iconStyles = {\n        'color': 'black',\n        'width': '50px',\n        'height': '50px'\n      };\n      var menuItemsBox = {\n        'margin': '25px 0 0 0'\n        /* Menu appearance styles. */\n\n      };\n      var duration = 200;\n      var defaultStyle = {\n        transition: \"opacity \".concat(duration, \"ms ease-in-out\"),\n        opacity: 0,\n        'backgroundColor': '#99ff99',\n        'color': 'white',\n        'display': 'block',\n        'width': '25%',\n        'left': '-500px',\n        'height': '100%',\n        'position': 'fixed',\n        'top': '0px'\n      };\n      var transitionStyles = {\n        entering: {\n          opacity: 0,\n          'left': '-500px'\n        },\n        entered: {\n          opacity: 1,\n          'left': '0px'\n        },\n        exiting: {\n          opacity: 1,\n          'left': '0px'\n        },\n        exited: {\n          opacity: 0,\n          'left': '-500px'\n        }\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Transition, {\n        in: this.state.visible,\n        out: !this.state.visible,\n        timeout: duration,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, function (state) {\n        return React.createElement(Nav, {\n          style: _objectSpread({}, defaultStyle, transitionStyles[state]),\n          onClick: _this3.mainMenu,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"menuItems\",\n          style: menuItemsBox,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(MainMenu_ListItem, {\n          path: \"/\",\n          text: \"P\\xE4\\xE4sivu\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }), React.createElement(MainMenu_ListItem, {\n          path: \"/map\",\n          text: \"Kartta\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }), React.createElement(MainMenu_ListItem, {\n          path: \"/restaurant_list\",\n          text: \"Ravintola lista\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }), _this3.state.restaurantOwner && React.createElement(MainMenu_ListItem, {\n          path: \"/restaurant_management\",\n          text: \"Ravintola hallinta\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }), _this3.state.admin && React.createElement(MainMenu_ListItem, {\n          path: \"/admin\",\n          text: \"Admin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }), _this3.state.moderator && React.createElement(MainMenu_ListItem, {\n          path: \"/moderating\",\n          text: \"Moderointi\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), _this3.state.userLogged && React.createElement(MainMenu_ListItem, {\n          path: \"/profile\",\n          text: \"Profiili\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }), !_this3.state.userLogged && React.createElement(MainMenu_ListItem, {\n          path: \"/login\",\n          text: \"Kirjaudu\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }), !_this3.state.userLogged && React.createElement(MainMenu_ListItem, {\n          path: \"/register\",\n          text: \"Rekister\\xF6idy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }), _this3.state.userLogged && React.createElement(MainMenu_LogoutButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        })));\n      })), React.createElement(Navbar, {\n        id: \"navBar\",\n        style: navBarStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(NavbarToggler, {\n        onClick: this.mainMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        className: \"icon\",\n        style: iconStyles,\n        icon: \"bars\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      })), React.createElement(\"header\", {\n        className: \"header\",\n        style: {\n          'Align': 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, this.props.header_text)), React.createElement(NavLink, {\n        tag: Link,\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        className: \"icon\",\n        style: iconStyles,\n        icon: \"home\",\n        onClick: this.home,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return NavigationBar;\n}(React.Component);\n\nexport default NavigationBar;","map":{"version":3,"sources":["/home/uusi2/sipuliton4/sipuliton/client/src/modules/app/components/NavigationBar.js"],"names":["React","Link","Navbar","NavbarToggler","Nav","NavItem","NavLink","Auth","styles","FontAwesomeIcon","Transition","MainMenu_ListItem","MainMenu_LogoutButton","NavigationBar","props","state","visible","userLogged","admin","restaurantOwner","moderator","mainMenu","bind","home","setState","checkAccessRights","currentAuthenticatedUser","then","user","userGroup","signInUserSession","accessToken","payload","catch","err","navBarStyle","iconStyles","menuItemsBox","duration","defaultStyle","transition","opacity","transitionStyles","entering","entered","exiting","exited","header_text","Component"],"mappings":"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","sourcesContent":["/* In this file, is implementation of the navigation bar and implementation of\nmainmenu which opens from navigation bar.*/\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Navbar,\n  NavbarToggler,\n  Nav,\n  NavItem,\n  NavLink,\n} from 'reactstrap';\nimport { Auth } from 'aws-amplify';\n\n/* Styles and icons */\nimport styles from '../../../styles/navigationbar.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Transition } from 'react-transition-group';\n\n/* Mainmenu components*/\nimport MainMenu_ListItem from '../../mainmenu/components/MainMenu_ListItem'\nimport MainMenu_LogoutButton from '../../mainmenu/components/MainMenu_LogoutButton'\n\n\n\nclass NavigationBar extends React.Component {\n\n  /* Constructor of the navication bar class. */\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      userLogged: false,\n      admin: false,\n      restaurantOwner:false,\n      moderator: false\n    };\n    this.mainMenu = this.mainMenu.bind(this);\n    this.home = this.home.bind(this);\n  }\n\n  /* Function which will be called when menu button is clicked. */\n  mainMenu() {\n      /* Sets menu visibility to visible or not visible. */\n      this.setState({ visible: !this.state.visible});\n      if(this.state.visible){\n        this.checkAccessRights();\n      }\n  }\n\n  /* Function which will be called when home button is clicked. */\n  home() {\n    /* Closes menu, if menu is open */\n    if(this.state.visible === true){\n      this.mainMenu();\n    }\n  }\n\n  /* This function checks logged in users rights. */\n  checkAccessRights(){\n    /* Get user information. */\n    Auth.currentAuthenticatedUser()\n        .then(user => {\n          /* Get current user group. */\n          var userGroup = user.signInUserSession.accessToken.payload[\"cognito:groups\"][0];\n          if(user != null){\n            /* Check if user is logged in, after that set access to either register or login */\n            this.setState({userLogged: true})\n\n            /* Check if user is basic user, then restrict all accesses */\n            if(userGroup === \"SipulitonModUserGroup\"){\n              this.setState({\n                admin: false,\n                restaurantOwner: false,\n                moderator: false\n              })\n            }\n\n            /* Check if user has admin access, after that set access to admin pages */\n            if(userGroup === \"SipulitonAdminUserGroup\"){\n              this.setState({admin: true})\n            }\n            else{\n              this.setState({admin: false})\n            }\n            /* Check if user is restaurant owner, after that set access to restaurant pages */\n\n            if(userGroup === 'SipulitonROUserGroup'){\n              this.setState({restaurantOwner: true})\n            }\n            else{\n              this.setState({restaurantOwner: false})\n            }\n\n            /* Check if user has moderator access, after that set access to moderator pages */\n            if(userGroup === \"SipulitonModUserGroup\"){\n              this.setState({moderator: true})\n            }\n            else{\n              this.setState({moderator: false})\n            }\n\n          }\n          else{\n              this.setState({userLogged: false})\n          }\n\n        })\n        .catch(err => {\n          /* If user is not logged in restrict accesses. */\n          this.setState(\n            {\n              userLogged: false,\n              admin: false,\n              restaurantOwner:false,\n              moderator: false\n            }\n          )\n        });\n\n  }\n\n  render() {\n      /* Navigation bar inline styles. */\n      const navBarStyle = {\n        'backgroundColor':'#99ff99',\n        'color': 'white',\n        'display': 'inlineblock',\n        'width':'100%',\n        'alignItems':'left',\n        'position':'fixed',\n        'bottom':'0'\n      }\n\n      const iconStyles = {\n        'color':'black',\n        'width':'50px',\n        'height':'50px'\n      }\n\n      const menuItemsBox = {\n        'margin':'25px 0 0 0'\n      }\n\n      /* Menu appearance styles. */\n      const duration = 200;\n      const defaultStyle = {\n        transition: `opacity ${duration}ms ease-in-out`,\n        opacity: 0,\n        'backgroundColor':'#99ff99',\n        'color': 'white',\n        'display': 'block',\n        'width':'25%',\n        'left':'-500px',\n        'height':'100%',\n        'position': 'fixed',\n        'top':'0px',\n      }\n\n      const transitionStyles = {\n        entering: { opacity: 0, 'left':'-500px' },\n        entered:  { opacity: 1, 'left':'0px' },\n        exiting: { opacity: 1, 'left':'0px' },\n        exited: { opacity: 0, 'left':'-500px' }\n      };\n\n      return (\n\n        <div>\n          <div>\n          <Transition in={this.state.visible} out={!this.state.visible}\n            timeout={duration}\n            >\n            {(state) => (\n              <Nav style={{\n                ...defaultStyle,\n                ...transitionStyles[state]\n              }} onClick={this.mainMenu}>\n                <div className=\"menuItems\" style={menuItemsBox}>\n                  <MainMenu_ListItem path=\"/\" text=\"Pääsivu\" />\n                  <MainMenu_ListItem path=\"/map\" text=\"Kartta\" />\n                  <MainMenu_ListItem path=\"/restaurant_list\" text=\"Ravintola lista\" />\n                  {this.state.restaurantOwner && <MainMenu_ListItem path=\"/restaurant_management\" text=\"Ravintola hallinta\" />}\n                  {this.state.admin && <MainMenu_ListItem path=\"/admin\" text=\"Admin\" />}\n                  {this.state.moderator && <MainMenu_ListItem path=\"/moderating\" text=\"Moderointi\" />}\n                  {this.state.userLogged && <MainMenu_ListItem path=\"/profile\" text=\"Profiili\" />}\n                  {!this.state.userLogged && <MainMenu_ListItem path=\"/login\" text=\"Kirjaudu\" />}\n                  {!this.state.userLogged && <MainMenu_ListItem path=\"/register\" text=\"Rekisteröidy\" />}\n                  {this.state.userLogged && <MainMenu_LogoutButton/>}\n                </div>\n              </Nav>\n            )}\n          </Transition>\n\n          </div>\n          <Navbar id=\"navBar\" style={navBarStyle}>\n            <NavbarToggler onClick={this.mainMenu}>\n              <FontAwesomeIcon className=\"icon\" style={iconStyles} icon=\"bars\"/>\n            </NavbarToggler>\n            <header className=\"header\" style={{'Align':'center'}}>\n              <h1>{this.props.header_text}</h1>\n            </header>\n            <NavLink tag={Link} to=\"/\">\n              <FontAwesomeIcon className=\"icon\" style={iconStyles} icon=\"home\" onClick={this.home}/>\n            </NavLink>\n          </Navbar>\n        </div>\n\n      );\n    }\n}\n\n\nexport default NavigationBar;\n"]},"metadata":{},"sourceType":"module"}