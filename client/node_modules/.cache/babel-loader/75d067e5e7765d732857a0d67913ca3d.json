{"ast":null,"code":"import _defineProperty from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/uusi2/dev-sip/sipuliton/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/uusi2/dev-sip/sipuliton/client/src/modules/register/components/Register.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { render } from 'react-dom';\nimport { Button, Form, FormGroup, Input, Label } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Auth } from \"aws-amplify\"; //import Social_Login from '../../login/index'; /*Import Google&FB log-in, as used in log-in view*/\n\n/* Localization */\n\nimport LocalizedStrings from 'react-localization';\n\nvar Register =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    /*construct the default state on first page load*/\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Register).call(this, props));\n\n    _this.handleRegistration =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var newUser;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                /*use signUp function to register*/\n                event.preventDefault();\n\n                _this.setState({\n                  isLoading: true\n                });\n\n                _context.prev = 2;\n                _context.next = 5;\n                return Auth.signUp({\n                  username: _this.state.username,\n                  password: _this.state.password,\n                  attributes: {\n                    email: _this.state.mail\n                  }\n                });\n\n              case 5:\n                newUser = _context.sent;\n\n                _this.setState({\n                  newUser: newUser\n                });\n\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n                alert(_context.t0.message);\n\n              case 12:\n                _this.setState({\n                  isLoading: false\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      isLoading: false,\n      username: \"\",\n      mail: \"\",\n      password: \"\",\n      retypeMail: \"\",\n      retypePass: \"\",\n      newUser: null,\n      ula: false //code: \"\",\n\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.validateForm = _this.validateForm.bind(_assertThisInitialized(_assertThisInitialized(_this))); //this.validateConfirmationForm = this.validateConfirmationForm.bind(this);\n\n    _this.handleRegistration = _this.handleRegistration.bind(_assertThisInitialized(_assertThisInitialized(_this))); //this.handleConfirmation = this.handleConfirmation.bind(this);\n\n    _this.renderConfirmationForm = _this.renderConfirmationForm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderForm = _this.renderForm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"validateForm\",\n    value: function validateForm() {\n      /*Make sure all fields are okay*/\n      var isValid = this.state.username.length > 0 && this.state.mail.length > 0 && this.state.password.length > 6 && this.state.username.length < 50 && this.state.mail.length < 50 && this.state.password.length < 30 && this.state.mail === this.state.retypeMail && this.state.password === this.state.retypePass && this.state.ula;\n      return isValid;\n    }\n    /*\n    // Not needed(?)\n    validateConfirmationForm() {\n    \treturn (this.state.code && this.state.code.length > 0);\n    }\n    */\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      /*what happens on form change*/\n      var target = event.target;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n      this.setState(_defineProperty({}, target.name, value));\n    }\n  }, {\n    key: \"renderConfirmationForm\",\n\n    /*\n    // Not needed (?)\n    //use confirmSignUp to confirm registration and do a sign in with singIn\n    handleConfirmation = async event => {\n    \tevent.preventDefault();\n    \tthis.setState({ isLoading: true });\n    \ttry {\n    \t\tawait Auth.confirmSignUp(this.state.email, this.state.confirmationCode);\n    \t\tawait Auth.signIn(this.state.username, this.state.password);\n    \t\tthis.props.userHasAuthenticated(true);\n    \t\tthis.props.history.push(\"/\");\n    \t} catch (e) {\n    \t\talert(e.message);\n    \t\tthis.setState({ isLoading: false });\n    \t}\n    }\n     */\n    value: function renderConfirmationForm() {\n      /*The second form where user enters a confirmation code and proceeds to the profile*/\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Rekister\\xF6inti onnistui! S\\xE4hk\\xF6postiisi \", this.state.mail, \" on l\\xE4hetetty vahvistusviesti, jonka vahvistuslinkki\\xE4 sinun tulee klikata ennen kuin voit kirjautua sis\\xE4\\xE4n.\"));\n    }\n  }, {\n    key: \"renderForm\",\n    value: function renderForm() {\n      /* Localization */\n      var strings = new LocalizedStrings({\n        en: {\n          username: \"Username:\",\n          register: \"Register\",\n          password: \"Password:\",\n          passwordAgain: \"Password again:\",\n          email: \"Email:\",\n          emailAgain: \"Email again:\",\n          acceptUla: \"Accept user rights\"\n        },\n        fi: {\n          username: \"Käyttäjätunnus:\",\n          register: \"Rekisteröidy\",\n          password: \"Salasana:\",\n          passwordAgain: \"Salasana uudelleen:\",\n          email: \"Sähköposti:\",\n          emailAgain: \"Sähköposti uudelleen:\",\n          acceptUla: \"Hyväksyn käyttäjäehdot\"\n        }\n      });\n      strings.setLanguage(this.props.match.params.language);\n      /*The first form where the user enters info needed for an account*/\n\n      return React.createElement(\"div\", {\n        id: \"register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, strings.register), React.createElement(Form, {\n        onSubmit: this.handleRegistration,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, strings.username), React.createElement(Input, {\n        type: \"text\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, strings.password), React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, strings.passwordAgain), React.createElement(Input, {\n        type: \"password\",\n        name: \"retypePass\",\n        value: this.state.retypePass,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, strings.email), React.createElement(Input, {\n        type: \"email\",\n        name: \"mail\",\n        value: this.state.mail,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, strings.emailAgain), React.createElement(Input, {\n        type: \"email\",\n        name: \"retypeMail\",\n        value: this.state.retypeMail,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Label, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, ' ', React.createElement(Input, {\n        type: \"checkbox\",\n        name: \"ula\",\n        value: this.state.ula,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), strings.acceptUla)), React.createElement(Input, {\n        type: \"submit\",\n        value: strings.register,\n        disabled: !this.validateForm(),\n        className: \"btn btn-primary mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, strings.register)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      /*decide which form to show, based on whether there is a 'newUser'*/\n      return this.state.newUser === null ? this.renderForm() : this.renderConfirmationForm();\n    }\n  }]);\n\n  return Register;\n}(React.Component);\n\nexport { Register as default };","map":{"version":3,"sources":["/home/uusi2/dev-sip/sipuliton/client/src/modules/register/components/Register.js"],"names":["React","Link","render","Button","Form","FormGroup","Input","Label","FontAwesomeIcon","Auth","LocalizedStrings","Register","props","handleRegistration","event","preventDefault","setState","isLoading","signUp","username","state","password","attributes","email","mail","newUser","alert","message","retypeMail","retypePass","ula","handleChange","bind","validateForm","renderConfirmationForm","renderForm","isValid","length","target","value","type","checked","name","strings","en","register","passwordAgain","emailAgain","acceptUla","fi","setLanguage","match","params","language","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { render } from 'react-dom';\nimport {\n  Button,\n\tForm,\n\tFormGroup,\n\tInput,\n\tLabel,\n} from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Auth } from \"aws-amplify\";\n//import Social_Login from '../../login/index'; /*Import Google&FB log-in, as used in log-in view*/\n\n/* Localization */\nimport LocalizedStrings from 'react-localization';\n\nexport default class Register extends React.Component {\n\tconstructor(props) {\n\t\t/*construct the default state on first page load*/\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tisLoading: false,\n\t\t\tusername: \"\",\n\t\t\tmail: \"\",\n\t\t\tpassword: \"\",\n\t\t\tretypeMail: \"\",\n\t\t\tretypePass: \"\",\n\t\t\tnewUser: null,\n\t\t\tula: false,\n\t\t\t//code: \"\",\n\t\t};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.validateForm = this.validateForm.bind(this);\n\t\t//this.validateConfirmationForm = this.validateConfirmationForm.bind(this);\n\t\tthis.handleRegistration = this.handleRegistration.bind(this);\n\t\t//this.handleConfirmation = this.handleConfirmation.bind(this);\n\t\tthis.renderConfirmationForm = this.renderConfirmationForm.bind(this);\n\t\tthis.renderForm = this.renderForm.bind(this);\n\t}\n\n\tvalidateForm() {\n\t\t/*Make sure all fields are okay*/\n\t\tconst isValid =\n\t\t\tthis.state.username.length > 0 &&\n\t\t\tthis.state.mail.length > 0 &&\n\t\t\tthis.state.password.length > 6 &&\n\t\t\tthis.state.username.length < 50 &&\n\t\t\tthis.state.mail.length < 50 &&\n\t\t\tthis.state.password.length < 30 &&\n\t\t\tthis.state.mail === this.state.retypeMail &&\n\t\t\tthis.state.password === this.state.retypePass &&\n\t\t\tthis.state.ula;\n\t\treturn isValid;\n\t}\n\n\t/*\n\t// Not needed(?)\n\tvalidateConfirmationForm() {\n\t\treturn (this.state.code && this.state.code.length > 0);\n\t}\n\t*/\n\n\thandleChange(event) {\n\t\t/*what happens on form change*/\n\t\tconst target = event.target;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tthis.setState({\n\t\t\t[target.name]: value\n\t\t});\n\t}\n\n\thandleRegistration = async event => {\n\t\t/*use signUp function to register*/\n\t\tevent.preventDefault();\n\t\tthis.setState({ isLoading: true });\n\t\ttry {\n\t\t\tconst newUser = await Auth.signUp({\n\t\t\t\tusername: this.state.username,\n\t\t\t\tpassword: this.state.password,\n\t\t\t\tattributes: {\n\t\t\t\t\temail: this.state.mail,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.setState({\n\t\t\t\tnewUser\n\t\t\t});\n\t\t} catch (e) {\n\t\t\talert(e.message);\n\t\t}\n\t\tthis.setState({ isLoading: false });\n\t}\n\n\t/*\n\t// Not needed (?)\n\t//use confirmSignUp to confirm registration and do a sign in with singIn\n\thandleConfirmation = async event => {\n\t\tevent.preventDefault();\n\t\tthis.setState({ isLoading: true });\n\t\ttry {\n\t\t\tawait Auth.confirmSignUp(this.state.email, this.state.confirmationCode);\n\t\t\tawait Auth.signIn(this.state.username, this.state.password);\n\t\t\tthis.props.userHasAuthenticated(true);\n\t\t\tthis.props.history.push(\"/\");\n\t\t} catch (e) {\n\t\t\talert(e.message);\n\t\t\tthis.setState({ isLoading: false });\n\t\t}\n\t}\n  */\n\n\trenderConfirmationForm() {\n\t\t/*The second form where user enters a confirmation code and proceeds to the profile*/\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<p>\n\t\t\t\t\tRekisteröinti onnistui!\n\t\t\t\t\tSähköpostiisi {this.state.mail} on lähetetty vahvistusviesti,\n\t\t\t\t\tjonka vahvistuslinkkiä sinun tulee klikata ennen kuin voit kirjautua sisään.\n\t\t\t\t</p>\n\t\t\t\t{/*\n\t\t\t\t<div id=\"register\">\n\t\t\t\t<Form onSubmit={this.handleConfirmation}>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label>Varmistuskoodi:</Label>\n\t\t\t\t\t\t<Input type=\"text\" name=\"code\" value={this.state.code} onChange={this.handleChange} required/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Button type=\"submit\" onClick={() => this.handleConfirmation()} disabled={!this.validateConfirmationForm()} className=\"btn btn-primary mb-2\">Vahvista</Button>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t\t*/}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderForm() {\n\n    /* Localization */\n    let strings = new LocalizedStrings({\n      en:{\n        username:\"Username:\",\n        register:\"Register\",\n        password:\"Password:\",\n        passwordAgain:\"Password again:\",\n        email:\"Email:\",\n        emailAgain:\"Email again:\",\n        acceptUla:\"Accept user rights\"\n      },\n      fi: {\n        username:\"Käyttäjätunnus:\",\n        register:\"Rekisteröidy\",\n        password:\"Salasana:\",\n        passwordAgain:\"Salasana uudelleen:\",\n        email:\"Sähköposti:\",\n        emailAgain:\"Sähköposti uudelleen:\",\n        acceptUla:\"Hyväksyn käyttäjäehdot\",\n      }\n    });\n    strings.setLanguage(this.props.match.params.language);\n\n\n\n\t\t/*The first form where the user enters info needed for an account*/\n\t\treturn (\n\t\t\t<div id=\"register\">\n\t\t\t\t<h2>{strings.register}</h2>\n\t\t\t\t<Form onSubmit={this.handleRegistration}>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label>{strings.username}</Label>\n\t\t\t\t\t\t<Input type=\"text\" name=\"username\" value={this.state.username} onChange={this.handleChange} required/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label>{strings.password}</Label>\n\t\t\t\t\t\t<Input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} required/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label>{strings.passwordAgain}</Label>\n\t\t\t\t\t\t<Input type=\"password\" name=\"retypePass\" value={this.state.retypePass} onChange={this.handleChange} required/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label>{strings.email}</Label>\n\t\t\t\t\t\t<Input type=\"email\" name=\"mail\" value={this.state.mail} onChange={this.handleChange} required/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label>{strings.emailAgain}</Label>\n\t\t\t\t\t\t<Input type=\"email\" name=\"retypeMail\" value={this.state.retypeMail} onChange={this.handleChange} required/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup check>\n\t\t\t\t\t\t<Label check>{' '}\n\t\t\t\t\t\t\t<Input type=\"checkbox\" name=\"ula\" value={this.state.ula} onChange={this.handleChange} required/>\n\t\t\t\t\t\t\t{strings.acceptUla}\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Input type=\"submit\" value={strings.register} disabled={!this.validateForm()} className=\"btn btn-primary mb-2\">{strings.register}</Input>\n\t\t\t\t</Form>\n\t\t\t\t{/*<Social_Login/>*/}\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\t/*decide which form to show, based on whether there is a 'newUser'*/\n\t\treturn (\n\t\t\tthis.state.newUser === null\n\t\t\t? this.renderForm()\n\t\t\t: this.renderConfirmationForm()\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}