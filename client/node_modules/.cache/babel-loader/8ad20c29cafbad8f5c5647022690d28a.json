{"ast":null,"code":"import _classCallCheck from \"/home/uusi/front4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/uusi/front4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/uusi/front4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/uusi/front4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/uusi/front4/sipuliton/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/uusi/front4/sipuliton/client/src/modules/home/components/Events.js\";\n\n/*\n\n  This file contains the events(restaurants) that are show on the landing page below the search bar\n\n*/\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport '../../../styles/landingpage.css';\n/* Localization */\n\nimport LocalizedStrings from 'react-localization';\n\nvar Events =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Events, _React$Component);\n\n  function Events(props) {\n    var _this;\n\n    _classCallCheck(this, Events);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Events).call(this, props));\n    _this.state = {\n      error: null,\n      isLoaded: false,\n      restaurants: []\n    };\n    return _this;\n  }\n  /** Once the object has been added to the tree, load up the data from the server **/\n\n\n  _createClass(Events, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(\"DEBUG: ComponentsDidMount entered\");\n      fetch(\"http://localhost:3000/landing\").then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(\"DEBUG: ComponentsDidMount success\");\n        console.log(result);\n\n        _this2.setState({\n          isLoaded: true,\n          restaurants: result.restaurants\n        });\n      }, // Note: it's important to handle errors here\n      // instead of a catch() block so that we don't swallow\n      // exceptions from actual bugs in components.\n      function (error) {\n        console.log(\"DEBUG: ComponentsDidMount error\");\n        console.log(error);\n\n        _this2.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n    } //Prints out how many stars the restaurant has\n\n  }, {\n    key: \"renderStars\",\n    value: function renderStars(starCount) {\n      //console.log(\"DEBUG: Starcount\");\n      //console.log(starCount);\n      var starIcons = [];\n\n      while (starCount >= 1) {\n        starIcons.push(React.createElement(FontAwesomeIcon, {\n          icon: \"star\",\n          key: starCount,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }));\n        starCount = starCount - 1;\n      } //console.log(starCount);\n\n\n      if (starCount >= 0.5) {\n        starIcons.push(React.createElement(FontAwesomeIcon, {\n          icon: \"star-half\",\n          key: starCount,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        })); //console.log(\"Half star added\");\n      } //console.log(starIcons);\n\n\n      return starIcons;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          error = _this$state.error,\n          isLoaded = _this$state.isLoaded,\n          restaurants = _this$state.restaurants;\n      /* Localization */\n\n      var strings = new LocalizedStrings({\n        en: {\n          loading: \"Loading suggestions...\",\n          suggestions: \"Restaurants you might be interested:\"\n        },\n        fi: {\n          loading: \"Ladataan ehdotuksia...\",\n          suggestions: \" Ravintoloita joista voisit olla kiinnostunut:\"\n        }\n      });\n\n      if (typeof this.props.language !== 'undefined') {\n        strings.setLanguage(this.props.language);\n      } else {\n        strings.setLanguage('fi');\n      }\n\n      if (error) {\n        return React.createElement(\"div\", {\n          className: \"eventsDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"event\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, \"Error: \", error.message));\n      } else if (!isLoaded) {\n        return React.createElement(\"div\", {\n          className: \"eventsDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"event\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, strings.loading));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"eventsDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \" \", strings.suggestions, \" \"), restaurants.map(function (restaurant) {\n          return React.createElement(\"div\", {\n            className: \"event\",\n            key: restaurant.name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, restaurant.name, \" \", _this3.renderStars(restaurant.rating_overall), \" \", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }), restaurant.street_address);\n        }));\n      }\n    }\n  }]);\n\n  return Events;\n}(React.Component);\n\nexport default Events;","map":{"version":3,"sources":["/home/uusi/front4/sipuliton/client/src/modules/home/components/Events.js"],"names":["React","FontAwesomeIcon","LocalizedStrings","Events","props","state","error","isLoaded","restaurants","console","log","fetch","then","res","json","result","setState","starCount","starIcons","push","strings","en","loading","suggestions","fi","language","setLanguage","message","map","restaurant","name","renderStars","rating_overall","street_address","Component"],"mappings":"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","sourcesContent":["/*\n\n  This file contains the events(restaurants) that are show on the landing page below the search bar\n\n*/\n\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport '../../../styles/landingpage.css';\n\n\n/* Localization */\nimport LocalizedStrings from 'react-localization';\n\nclass Events extends React.Component {  \n  \nconstructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      restaurants: []\n    };\n  }\n  \n  /** Once the object has been added to the tree, load up the data from the server **/\n  componentDidMount() {\n    console.log(\"DEBUG: ComponentsDidMount entered\");\n    \n    fetch(\"http://localhost:3000/landing\")\n      .then(res => res.json())\n      .then(\n        (result) => {\n          console.log(\"DEBUG: ComponentsDidMount success\");\n          console.log(result);\n          this.setState({\n            isLoaded: true,\n            restaurants: result.restaurants\n          });\n        },\n        // Note: it's important to handle errors here\n        // instead of a catch() block so that we don't swallow\n        // exceptions from actual bugs in components.\n        (error) => {\n          console.log(\"DEBUG: ComponentsDidMount error\");\n          console.log(error);\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        }\n      )\n  }\n  \n  //Prints out how many stars the restaurant has\n  renderStars(starCount)\n  {\n    //console.log(\"DEBUG: Starcount\");\n    //console.log(starCount);\n    \n    const starIcons = [];\n    while(starCount >= 1)\n    {\n      starIcons.push(<FontAwesomeIcon icon=\"star\" key={starCount} />);\n      starCount = starCount - 1;\n    }\n    //console.log(starCount);\n    if(starCount >= 0.5)\n    {\n      starIcons.push(<FontAwesomeIcon icon=\"star-half\" key={starCount} />);\n      //console.log(\"Half star added\");\n    }\n    //console.log(starIcons);\n    return starIcons\n  }\n  \n  render() {\n    \n    const { error, isLoaded, restaurants } = this.state;\n    \n    /* Localization */\n    let strings = new LocalizedStrings({\n      en:{\n        loading:\"Loading suggestions...\",\n        suggestions:\"Restaurants you might be interested:\"\n      },\n      fi: {\n        loading:\"Ladataan ehdotuksia...\",\n        suggestions:\" Ravintoloita joista voisit olla kiinnostunut:\"\n      }\n    });\n    \n    if(typeof this.props.language !== 'undefined'){\n      strings.setLanguage(this.props.language);\n    }\n    else{\n      strings.setLanguage('fi');\n    }\n    \n    if (error) {\n      \n      return (\n        <div className=\"eventsDiv\"> \n          <div className=\"event\">\n            Error: {error.message}\n          </div>\n        </div>\n      );\n      \n    } else if (!isLoaded) {\n      \n      return (\n        <div className=\"eventsDiv\"> \n          <div className=\"event\">\n            {strings.loading}\n          </div>\n        </div>\n      );\n      \n    } else {\n      return (\n         <div className=\"eventsDiv\"> \n          <h3> {strings.suggestions} </h3>\n          {restaurants.map((restaurant) =>\n            <div className=\"event\" key={restaurant.name} >\n              {restaurant.name} {this.renderStars(restaurant.rating_overall)} <br/>\n              {restaurant.street_address}\n            </div>\n          )}      \n        </div>\n      );\n      \n    }\n  }\n  \n}\n\nexport default Events;"]},"metadata":{},"sourceType":"module"}